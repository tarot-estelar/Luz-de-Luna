<!DOCTYPE html>
<html lang="es">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N5WR8LC8ZT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N5WR8LC8ZT');
</script>
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Luz de Luna - Tarot</title>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <style>
    body {
      font-family: 'Georgia', serif;
      background-color: #1c1b2f;
      color: #f0e6ff;
      text-align: center;
      padding: 35px;
    }

    h1 {
      font-size: 2.5rem;
      color: #dabfff;
    }

    .btn {
      background-color: #9c27b0;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-size: 1.2rem;
      cursor: pointer;
      margin-top: 20px;
    }

    .btn:hover {
      background-color: #7b1fa2;
    }

    .card {
      margin-top: 30px;
      padding: 20px;
      background-color: #2e2c47;
      border-radius: 12px;
      box-shadow: 0 0 15px #8e44ad;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    img {
      max-width: 200px;
      margin: 20px 0;
    }

    .ad {
      margin: 40px 0;
      padding: 20px;
      background: #3d395e;
      border-radius: 8px;
    }

    footer {
      margin-top: 60px;
      font-size: 0.9rem;
      color: #aaa;
    }

    a {
      color: #ffcaff;
    }
      
    .tituloCompartir {
      display: inline-block;
      margin-top: 8px;
      padding: 4px 12px;
      border: 1px solid rgba(255,255,255,0.6);
      border-radius: 6px;
      background-color: rgba(255,255,255,0.1);
      font-weight: bold;
      color: #f0e6ff;
      font-size: 1rem;
    }

    .signo-info {
      background-color: rgba(255, 255, 255, 0.05);
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
      border-left: 4px solid #dabfff;
    }
  </style>
</head>
<body>

  <h1>Tu carta de Tarot</h1>
  <p>Conecta con tu energía hoy.✨</p>
 
  <label for="fechaNacimiento"> Ingresá tu fecha de nacimiento:</label><br>
  <input type="date" id="fechaNacimiento" style="margin: 10px; padding: 5px; border-radius: 6px;"><br>

  <label for="preguntaUsuario"> Escribí tu pregunta o intención:</label><br>
  <input type="text" id="preguntaUsuario" placeholder="¿Qué necesito saber hoy?" style="margin: 10px; padding: 5px; width: 30%; border-radius: 6px;"><br>

  <button class="btn" onclick="iniciarLectura()">Tu Carta</button>

  <div id="mensajeBarajar" style="display:none; font-size: 1.2rem; margin-top: 20px;">🔮 Conectando con tu energía...</div>

  <div id="resultado" class="card" style="display: none;">
    <h2 id="nombreCarta"></h2>
    <!-- Agregamos crossorigin para html2canvas -->
    <img id="imagenCarta" crossorigin="anonymous" src="" alt="Carta de Tarot" />

    <div id="marcaSitio" style="
      background-color: rgba(255, 255, 255, 0.05);
      padding: 10px 20px;
      margin-top: 8px;
      border-radius: 8px;
      font-weight: bold;
      color: #dabfff;
      font-size: 1.1rem;
      width: 90%;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    ">
      Luz de Luna – Tarot 🔮
    </div>
   
    <p><strong>🌟Mensaje:</strong> <span id="resumenCarta"></span></p>
    <p><strong>🔑Palabras clave:</strong> <span id="palabrasClaveCarta"></span></p>
    <p><strong>🧭Consejo:</strong> <span id="consejoCarta"></span></p>
    
    <!-- Información del signo zodiacal y fase lunar -->
    <div class="signo-info">
      <p><strong>✨ Signo zodiacal:</strong> <span id="signoZodiaco"></span></p>
      <p><strong>🌙 Fase lunar hoy:</strong> <span id="faseLunar"></span></p>
    </div>
    
    <button class="btn" onclick="generarImagen()" id="botonCompartir" style="display: none;">
      Compartir tu carta
    </button>
  </div>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1330671703784338"
     crossorigin="anonymous"></script>
  <!-- Banner inferior -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-1330671703784338"
       data-ad-slot="6495754373"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
   
  <p>Si te gustó <a href="https://www.buymeacoffee.com/luzdelunatarot" target="_blank">Podes invitarme un cafecito 💖</a></p>

  <footer>
    <p>© 2025 Luz de Luna - Tarot - Sitio solamente con fines espirituales </p>
  </footer>

  <script>
    const cartas = [
      {
        nombre: "El Loco",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20loco.jpg",
        resumen: "Confía en el viaje.",
        palabrasClave: "Nuevos comienzos, aventura, espontaneidad",
        consejo: "Soltá el miedo. Animate a dar el salto sin certezas."
      },
      {
        nombre: "El Mago",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20mago.jpg",
        resumen: "Tenés todos los recursos para manifestar lo que deseás.",
        palabrasClave: "Voluntad – Acción – Poder – Creatividad",
        consejo: "Canalizá tu energía. Tomá el control y hacé que las cosas sucedan."
      },
      {
        nombre: "La Sacerdotisa",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20sacerdotista.jpg",
        resumen: "El conocimiento está dentro tuyo.",
        palabrasClave: "Intuición – Misterio – Sabiduría interior – Paciencia",
        consejo: "Escuchá tu voz interna antes de actuar."
      },
      {
        nombre: "La Emperatriz",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/la%20emperatriz.jpg",
        resumen: "Abundancia, fertilidad, creatividad.",
        palabrasClave: "Belleza – Cuidado – Ciclos naturales",
        consejo: "Cuidá lo que estás gestando. Todo florecerá."
      },
      {
        nombre: "El Emperador",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20emperador.jpg",
        resumen: "Orden, estructura y autoridad.",
        palabrasClave: "Estabilidad – Disciplina – Protección – Responsabilidad",
        consejo: "Organizate y tomá el mando con sabiduría."
      },
      {
        nombre: "El Hierofante",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20hierofante.jpg",
        resumen: "Tradición, guía espiritual y aprendizaje.",
        palabrasClave: "Enseñanza – Valores – Conexión espiritual – Comunidad",
        consejo: "Buscá guía o compartí tu experiencia."
      },
      {
        nombre: "Los Enamorados",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/los%20enamorados.jpg",
        resumen: "Unión, decisiones y armonía.",
        palabrasClave: "Amor – Dualidad – Elección – Conexión",
        consejo: "Elegí desde el amor, no desde el miedo."
      },
      {
        nombre: "El Carro",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20carro.jpg",
        resumen: "Victoria sobre obstáculos.",
        palabrasClave: "Voluntad – Movimiento – Determinación – Éxito",
        consejo: "Definí tu objetivo y seguí adelante con firmeza."
      },
      {
        nombre: "La Justicia",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20justicia%202.jpg",
        resumen: "Equilibrio, decisiones y karma.",
        palabrasClave: "Verdad – Justicia – Responsabilidad",
        consejo: "Sé honesto con vos y con los demás."
      },
      {
        nombre: "El Ermitaño",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/el%20ermita%C3%B1o.jpg",
        resumen: "Búsqueda interior y sabiduría.",
        palabrasClave: "Introspección – Silencio – Guía interna",
        consejo: "Tomate un tiempo para vos. Escuchate."
      },
      {
        nombre: "La Rueda de la Fortuna",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20rueda%20de%20la%20fortuna%202.jpg",
        resumen: "Cambio y ciclos.",
        palabrasClave: "Destino – Suerte – Oportunidad",
        consejo: "Confiá en los giros del destino."
      },
      {
        nombre: "La Fuerza",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20fuerza.jpg",
        resumen: "Dominio propio desde la dulzura.",
        palabrasClave: "Coraje – Compasión – Control interno",
        consejo: "Tu fuerza está en la calma."
      },
      {
        nombre: "El Colgado",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20colgado.jpg",
        resumen: "Rendición y cambio de perspectiva.",
        palabrasClave: "Pausa – Entrega – Nueva visión",
        consejo: "Esperá y mirá desde otro ángulo."
      },
      {
        nombre: "La Muerte",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/la%20muerte.jpg",
        resumen: "Transformación y fin de ciclo.",
        palabrasClave: "Renacimiento – Cambio – Liberación",
        consejo: "Soltá lo que ya cumplió su etapa."
      },
      {
        nombre: "La Templanza",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20templanza.jpg",
        resumen: "Equilibrio, sanación e integración.",
        palabrasClave: "Paz – Armonía – Moderación",
        consejo: "Buscá el balance en todo lo que hagas."
      },
      {
        nombre: "El Diablo",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20diablo.jpg",
        resumen: "Apegos, tentaciones y sombras.",
        palabrasClave: "Dependencia – Deseo – Ilusión",
        consejo: "Reconocé tus cadenas y elegí liberarte."
      },
      {
        nombre: "La Torre",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/la%20torre.jpg",
        resumen: "Ruptura inesperada que libera.",
        palabrasClave: "Crisis – Despertar – Liberación",
        consejo: "Agradecé la verdad que se revela."
      },
      {
        nombre: "La Estrella",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/la%20estrella%202.jpg",
        resumen: "Esperanza, guía espiritual, inspiración.",
        palabrasClave: "Fe – Armonía – Renovación",
        consejo: "Confiá en el universo."
      },
      {
        nombre: "La Luna",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/la%20luna%203.png",
        resumen: "Intuición, confusión y misterio.",
        palabrasClave: "Ciclos – Emociones – Ilusión",
        consejo: "No tomes decisiones en la niebla."
      },
      {
        nombre: "El Sol",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20sol.jpg",
        resumen: "Alegría, claridad y éxito.",
        palabrasClave: "Vitalidad – Verdad – Felicidad",
        consejo: "Disfrutá y compartí tu luz."
      },
      {
        nombre: "El Juicio",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/e5eea9356ddd899ef598dc87873faa1fd81b45e2/el%20juicio.jpg",
        resumen: "Llamado interior y despertar.",
        palabrasClave: "Redención – Decisión – Evaluación",
        consejo: "Escuchá tu verdad y actuá desde el alma."
      },
      {
        nombre: "El Mundo",
        imagen: "https://raw.githubusercontent.com/tarot-estelar/Tarot-Estelar/main/el%20mundo.jpg",
        resumen: "Plenitud, cierre de ciclo y éxito.",
        palabrasClave: "Integración – Cumplimiento – Unidad",
        consejo: "Celebrá lo que lograste."
      }
    ];

    // Función para calcular el signo zodiacal
    function calcularSignoZodiacal(fecha) {
      const fechaNac = new Date(fecha);
      const dia = fechaNac.getDate();
      const mes = fechaNac.getMonth() + 1; // getMonth() devuelve 0-11

      if ((mes == 3 && dia >= 20) || (mes == 4 && dia <= 19)) return "♈ Aries";
      if ((mes == 4 && dia >= 20) || (mes == 5 && dia <= 20)) return "♉ Tauro";
      if ((mes == 5 && dia >= 21) || (mes == 6 && dia <= 20)) return "♊ Géminis";
      if ((mes == 6 && dia >= 21) || (mes == 7 && dia <= 22)) return "♋ Cáncer";
      if ((mes == 7 && dia >= 23) || (mes == 8 && dia <= 22)) return "♌ Leo";
      if ((mes == 8 && dia >= 23) || (mes == 9 && dia <= 22)) return "♍ Virgo";
      if ((mes == 9 && dia >= 23) || (mes == 10 && dia <= 22)) return "♎ Libra";
      if ((mes == 10 && dia >= 23) || (mes == 11 && dia <= 21)) return "♏ Escorpio";
      if ((mes == 11 && dia >= 22) || (mes == 12 && dia <= 21)) return "♐ Sagitario";
      if ((mes == 12 && dia >= 22) || (mes == 1 && dia <= 19)) return "♑ Capricornio";
      if ((mes == 1 && dia >= 20) || (mes == 2 && dia <= 18)) return "♒ Acuario";
      if ((mes == 2 && dia >= 19) || (mes == 3 && dia <= 20)) return "♓ Piscis";
      
      return "Signo no determinado";
    }

    // Función para calcular la fase lunar actual
    function calcularFaseLunar() {
      const hoy = new Date();
      const año = hoy.getFullYear();
      const mes = hoy.getMonth();
      const dia = hoy.getDate();
      
      // Cálculo aproximado de la fase lunar
      const lunaciónDias = 29.53058867; // Duración promedio de un ciclo lunar
      const fechaReferencia = new Date(2000, 0, 6); // Luna nueva conocida
      const diferenciaDias = (hoy - fechaReferencia) / (1000 * 60 * 60 * 24);
      const cicloActual = diferenciaDias / lunaciónDias;
      const faseDecimal = cicloActual - Math.floor(cicloActual);
      
      if (faseDecimal < 0.125) return "🌑 Luna Nueva";
      if (faseDecimal < 0.375) return "🌒 Luna Creciente";
      if (faseDecimal < 0.625) return "🌕 Luna Llena";
      if (faseDecimal < 0.875) return "🌘 Luna Menguante";
      return "🌑 Luna Nueva";
    }

    function mostrarCarta(carta) {
      document.getElementById("nombreCarta").textContent = carta.nombre;
      document.getElementById("imagenCarta").src = carta.imagen;
      document.getElementById("resumenCarta").textContent = carta.resumen;
      document.getElementById("palabrasClaveCarta").textContent = carta.palabrasClave;
      document.getElementById("consejoCarta").textContent = carta.consejo;
      
      // Mostrar signo zodiacal y fase lunar
      const fecha = document.getElementById("fechaNacimiento").value;
      if (fecha) {
        document.getElementById("signoZodiaco").textContent = calcularSignoZodiacal(fecha);
      }
      document.getElementById("faseLunar").textContent = calcularFaseLunar();
      
      document.getElementById("resultado").style.display = "block";
      document.getElementById("botonCompartir").style.display = "inline-block";
    }

    function iniciarLectura() {
      const fecha = document.getElementById("fechaNacimiento").value;
      const pregunta = document.getElementById("preguntaUsuario").value;

      if (!fecha) {
        alert("Por favor completá tu fecha de nacimiento.");
        return;
      }

      document.getElementById("mensajeBarajar").style.display = "block";

      setTimeout(() => {
        document.getElementById("mensajeBarajar").style.display = "none";
        tirarCarta();
      }, 3000); // 3 segundos
    }

    function tirarCarta() {
      const today = new Date().toISOString().split('T')[0];
      const savedData = JSON.parse(localStorage.getItem('cartaDelDia'));

      if (savedData && savedData.fecha === today) {
        alert("Ya sacaste tu carta del día ✨ Volvé mañana.");
        mostrarCarta(savedData.carta);
        return;
      }

      const carta = cartas[Math.floor(Math.random() * cartas.length)];
      localStorage.setItem('cartaDelDia', JSON.stringify({ fecha: today, carta }));
      mostrarCarta(carta);
    }

    function compartirCarta() {
      const carta = document.getElementById("nombreCarta").textContent;
      const resumen = document.getElementById("resumenCarta").textContent;
      const palabras = document.getElementById("palabrasClaveCarta").textContent;
      const consejo = document.getElementById("consejoCarta").textContent;
      const signo = document.getElementById("signoZodiaco").textContent;
      const fase = document.getElementById("faseLunar").textContent;
      const mensaje = `Mi carta del día es ${carta}: 🌟 ${resumen}\n🔑 ${palabras}\n🧭 ${consejo}\n✨ ${signo}\n🌙 ${fase}`;

      if (navigator.share) {
        navigator.share({
          title: 'Mi carta del día',
          text: mensaje,
          url: window.location.href
        });
      } else {
        alert("Compartí este mensaje:\n" + mensaje);
      }
    }

    // Mostrar automáticamente si ya sacó una carta hoy
    window.addEventListener('DOMContentLoaded', () => {
      const today = new Date().toISOString().split('T')[0];
      const savedData = JSON.parse(localStorage.getItem('cartaDelDia'));
      if (savedData && savedData.fecha === today) {
        mostrarCarta(savedData.carta);
      }
    });

    function generarImagen() {
      const elemento = document.getElementById("resultado");

      html2canvas(elemento, {
        useCORS: true,       // permite usar crossorigin
        allowTaint: false    // no taints the canvas
      }).then(canvas => {
        canvas.toBlob(blob => {
          const archivo = new File([blob], 'mi-carta.png', { type: 'image/png' });

          // Si el navegador soporta compartir archivos (móviles)
          if (navigator.canShare && navigator.canShare({ files: [archivo] })) {
            navigator.share({
              title: 'Mi carta del día',
              text: '¡Mirá mi carta de tarot! ✨',
              files: [archivo]
            })
            .catch(err => {
              // Si el usuario canceló el diálogo, simplemente no descargamos
              if (err.name !== 'AbortError') {
                console.error("Error al compartir:", err);
                alert("No se pudo compartir tu carta.");
              }
            });
          } else {
            // Si no se puede compartir (desktop, etc.), lo descargamos
            const enlace = document.createElement('a');
            enlace.href = URL.createObjectURL(blob);
            enlace.download = "mi-carta.png";
            enlace.click();
          }
        });
      });
    }
  </script>
  
</body>
</html>

